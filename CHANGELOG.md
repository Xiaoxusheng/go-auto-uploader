# 📝 Go Auto Uploader 迭代更新日志 (Changelog)

### [v1.3.1] - 最新更新
## 🚀 最新特性 (Features)

### 🖥️ 前端与交互体验 (UI/UX)

* **电竞级网络延迟监测 (Ping)**：为 WebSocket 实时信道新增了毫秒级的 Ping 值探测。前端每 5 秒发送一次时间戳探针，配合红、橙、绿三色动态预警，完美感知当前系统与浏览器的网络连通质量。
* **智能配置对比与富文本通知 (Rich Notifications)**：
* 重构了系统参数保存逻辑，新增**配置快照 (Snapshot)** 对比。修改配置后，右下角会弹出优雅的差异化清单（例：`🚀 并发数: 3 ➜ 5`）。
* 自动/手动触发扫描时，右下角会弹出包含“定时周期”、“并发线程数”及“挂载目录数”的数据化横幅提醒；扫描结束时会汇报本轮发现的新文件数量。


* **全局安全操作防护 (Safety Modals)**：为“清空队列”、“停止系统”、“重置远端”等敏感操作引入了带遮罩层的二次确认弹窗，针对高危指令（如“停止系统”）定制了专属警告语，彻底杜绝鼠标误触。
* **系统级视觉完善**：
* 引入了纯代码生成的 SVG `🚀` Base64 矢量图标 (Favicon)，解决了浏览器标签页空白不专业的问题。
* **全新空状态设计 (Empty States)**：为实时任务和历史记录表格设定了 `400px+` 的安全最小高度，并设计了带有巨型透明 Arco Icon 的居中占位图，解决了无数据时页面高度坍塌、排版跳动的问题。
* **终端日志自动追尾**：修复了日志刷新时的滚动逻辑，新日志产生后容器会自动 `scrollTop = scrollHeight` 滑动到最底部，高度还原真实的物理终端体验。



### ⚙️ 后端引擎与核心逻辑 (Backend)

* **全局日志拦截投射 (Global Log Interceptor)**：
* 舍弃了各处分散的硬编码推流，重构了底层标准库 `log.SetOutput`。
* 现在的引擎能够自动捕获所有物理控制台输出，剥离冗余的日期前缀，自动识别 `[ERR]` / `[WARN]` 关键字进行危险评级，并毫秒级投射到 Web 前端。


* **高并发反射探针 (WS Reflector)**：重构了 `handleWebSocket` 路由，加入了 `sync.Mutex` 互斥锁，支持无损、并发地处理并即刻原路弹回前端发送的 `ping` 消息。

---

## 🐞 修复与优化 (Bug Fixes & Optimizations)

* **修复目录监控数据停滞 (Stats Bug)**：解决了文件在“真实上传成功”或“哈希秒传成功”后，首页目录卡片中的【已上传文件数】和【上传量】始终为 0 的 Bug。现已加入 `updateSuccessStats` 钩子，数据即刻联动跳动。
* **修复并发状态显示脱节**：修复了控制台定期打印 `[QUEUE][STATUS]` 时，并发线程数永远显示启动时命令行的初始值的问题。现已改为动态加锁读取 `appConfig.Workers`，确保修改并发数后日志显示立即同步。
* **代码层级解耦**：清理了废弃的静态变量限制，统一由内存中的 `appConfigMu.RLock()` 统筹全权接管全局参数，使得并发、限速、扫描周期的“热更新”能力真正做到滴水不漏。


## 📝 迭代更新日志 (Changelog)

### [v1.3.2] - 最新更新

#### 🌟 核心特性 (New Features)

* **动态远端 API 配置 (Hot-Reload API Config)**：彻底告别硬编码！将远端服务器地址 (Endpoint)、认证账号、认证密码全部接入动态配置中心。现在可以直接在网页端“系统参数设置”中随时修改对接的服务器，保存即生效，无需重启或重新编译后端。
* **智能扫描溯源通知 (Smart Scan Triggers)**：重构了后端扫描指令下发逻辑。现在前端的扫描启动横幅能够智能识别并展示触发原因：
* `⏱️ 定时扫描执行中`（伴随显示当前设定的分钟周期）
* `▶️ 系统已恢复运行`（手动点击启动扫描时）
* `🔍 手动深度扫描启动`（手动强制重扫时）
* `⚙️ 配置重载扫描`（修改配置保存触发时）


* **电竞级网络延迟监测 (Ping/Pong)**：为 WebSocket 实时信道新增了毫秒级的 Ping 值探测。前端每 5 秒发送一次时间戳探针，配合红、橙、绿三色动态预警，完美感知当前系统与远端服务器的连通质量。

#### 🎨 界面与交互优化 (UI/UX)

* **高级数据网格 (Advanced Data Grids)**：
* 为“实时任务”与“历史记录”全面开启了专业表格特性：支持鼠标拖拽调整列宽 (`column-resizable`)、斑马纹 (`stripe`)、悬浮高亮 (`hoverable`) 以及全封闭边框 (`bordered`)。
* 优化了表格渲染引擎，移除了导致边框显示异常的虚拟列表限制，使列与列之间的纵向分割线更加清晰严谨。


* **纯净的时间感知暗黑模式 (Time-Based Dark Mode)**：引入了严格的昼夜作息自动切换逻辑。每天 `18:00` 至次日早上 `07:59` 打开面板将自动呈现极客暗黑模式，白天 (`08:00 - 17:59`) 则呈现清爽浅色模式。
* **全量中文化状态呈现 (Localization)**：在前端加入了状态转译拦截器，将底层的数据状态 (`success`, `uploading` 等) 在表格和筛选下拉框中无缝转译为优雅的中文（如“处理中”、“成功 (秒传)”），提升整体阅读体验。
* **全新空状态设计 (Empty States)**：为表格设定了 `400px+` 的安全最小高度，并设计了带有巨型透明图标的居中占位图（收件箱、打勾、历史时钟图标），彻底解决了无数据时页面高度坍塌、排版剧烈跳动的问题。
* **配置差异化快照 (Config Snapshot)**：保存配置时，右下角弹窗会动态计算并生成新老参数的“差异化对比清单”（例如：`🔗 API 地址已更新`，`🚀 并发数: 3 ➜ 5`）。

#### 🔧 底层与架构调整 (Backend & Architecture)

* **并发写锁升级 (WS Mutex)**：重构了底层的 WebSocket 处理器，将原本的读写锁升级为严格的普通互斥锁 (`sync.Mutex`)，确保在同时应对高频 Ping 探针反射与大批量日志广播时，绝对不会出现协程抢占导致的 Panic 崩溃。
* **全局日志拦截投射 (Global Log Interceptor)**：舍弃了各处分散的硬编码推流，通过接管标准库 `log.SetOutput`，自动捕获物理控制台的全部输出，剥离冗余时间前缀并识别 `[ERR]`/`[WARN]` 标签，毫秒级投射到前端虚拟终端。

## 📜 文档与规范 (Documentation)

* **标准化开源库主页**：起草了带有特性说明、启动参数表、API 规范以及带占位符的 6 图展示位的标准企业级 `README.md`。
* **开源协议合规**：引入了极度宽松友好的 `MIT License` 声明，为项目的后续传播与二次开发打下基础。